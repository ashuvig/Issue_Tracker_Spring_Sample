# Issue_Tracker_Spring_Sample

The Issue tracker application is sample Spring Boot application which allows users to create
and manage the progress of issues. 
- Restful API using @MatrixVariable
- used Mockito as Mocking framework for Junit
- Mock JdbcTemplate for Unit testing 
- Jacoco for COde Coverage
- In memory - H2 database (http://localhost:8080/v1/h2)

Following URL to perform CRUD operation based 

GET : http://localhost:8080/v1/issuetrackerapp/issue/193
Success : 200
Sample Response :
[
    {
        "issue_id": null,
        "issue_title": "SampleIssue01",
        "issue_description": "Sample Issue Created<TransactionID_11_1521127828302>",
        "issue_status": "done",
        "issue_reporter": "2",
        "issue_assignee": "2",
        "issue_created": "2016-02-02",
        "issue_completed": "2018-06-03"
    }
]

Anomaly : Id doesn't exist in the DB 
Response Status : 204 (Http Status Content Not Found)


DELETE : http://localhost:8080/v1/issuetrackerapp/issue/129
Success : 200
{
    "code": "200",
    "transactionId": "TransactionID_35_1521126330420",
    "message": "Successfully Deleted",
    "issueTracker": []
}

Anomaly : Id doesn't exist in the DB 
Response Status : 204 (Http Status Content Not Found)


POST
http://localhost:8080/v1/issuetrackerapp/issue
Request 
{
"issue_title":"SampleIssue01",
"issue_description":"Sample Issue Created",
"issue_status":"Created",
"issue_reporter": "2",
"issue_created":"2016-02-02"
}

Response :
Success : 200
{
    "code": "200",
    "transactionId": "TransactionID_21_1521259493970",
    "message": "Success",
    "issueTracker": []
}

Failure Response :
Status : 200

{
    "code": "500",
    "transactionId": "TransactionID_50_1521260444253",
    "message": "PreparedStatementCallback; SQL [INSERT INTO ISSUE_TRACKER.ISSUE (title, description, status, reporter, created) VALUES (?,?,?,?,?);]; Data conversion error converting \"'2rr' (ISSUE: REPORTER BIGINT NOT NULL)\"; SQL statement:\nINSERT INTO ISSUE_TRACKER.ISSUE (title, description, status, reporter, created) VALUES (?,?,?,?,?) -- (?1, ?2, ?3, ?4, ?5) [22018-196]; nested exception is org.h2.jdbc.JdbcSQLException: Data conversion error converting \"'2rr' (ISSUE: REPORTER BIGINT NOT NULL)\"; SQL statement:\nINSERT INTO ISSUE_TRACKER.ISSUE (title, description, status, reporter, created) VALUES (?,?,?,?,?) -- (?1, ?2, ?3, ?4, ?5) [22018-196]",
    "issueTracker": []
}

PUT
http://localhost:8080/v1/issuetrackerapp/issue/193
Request
{
"issue_title":"SampleIssue01",
"issue_description":"Sample Issue Created",
"issue_status":"done",
"issue_assignee": "2",
"issue_completed":"2018-06-03"
}

Response
{
    "code": "200",
    "transactionId": "TransactionID_11_1521127828302",
    "message": "Successfully Modified",
    "issueTracker": []
}

Anomaly : Id doesn't exist in the DB 
Response Status : 204 (Http Status Content Not 


##### Filtering and Sorting ###########

The filter criteria & Sortng Criteria can be passed as a part of URI using Matrix Variables.

Follwoing are few samples for reference

#### Filter & Sorting Both
http://localhost:8080/v1/issuetrackerapp/filter/filter;reporter=1;assignee=1/sort/sort;created=desc

#### Filters Only
http://localhost:8080/v1/issuetrackerapp/filter/filter;reporter=1
http://localhost:8080/v1/issuetrackerapp/filter/filter;status='done'

#### Sorting Only
http://localhost:8080/v1/issuetrackerapp/sort/sort;created=desc



########### SQL Script #####################

CREATE SCHEMA ISSUE_TRACKER;

CREATE TABLE ISSUE_TRACKER.USER (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY,
  username varchar(50) not null
);

CREATE TABLE ISSUE_TRACKER.ISSUE (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY,
  title varchar(255) not null,
  description varchar(255) not null,
  status varchar(20) not null,
  reporter BIGINT not null,
  assignee BIGINT,
  created DATE NOT NULL,
  completed DATE
);

ALTER TABLE ISSUE_TRACKER.ISSUE
ADD FOREIGN KEY (reporter)
REFERENCES ISSUE_TRACKER.USER(id);

ALTER TABLE ISSUE_TRACKER.ISSUE
ADD FOREIGN KEY (assignee)
REFERENCES ISSUE_TRACKER.USER(id);

INSERT INTO ISSUE_TRACKER.USER (username) VALUES ('j.jones');
INSERT INTO ISSUE_TRACKER.USER (username) VALUES ('h.humble');

INSERT INTO ISSUE_TRACKER.ISSUE (title, description, status, reporter, created)
VALUES (
    'Issue number one',
    'This is issue number one',
    'backlog',
    (select id from ISSUE_TRACKER.USER where USER.username = 'j.jones'),
    '2017-08-01'
);

INSERT INTO ISSUE_TRACKER.ISSUE (title, description, status, reporter, created)
VALUES (
  'Issue number two',
  'This is issue number two',
  'backlog',
  (select id from ISSUE_TRACKER.USER where USER.username = 'h.humble'),
  '2017-08-01'
);

INSERT INTO ISSUE_TRACKER.ISSUE (title, description, status, reporter, assignee, created, completed)
VALUES (
  'Issue number three',
  'This is issue number three',
  'done',
  (select id from ISSUE_TRACKER.USER where USER.username = 'h.humble'),
  (select id from ISSUE_TRACKER.USER where USER.username = 'h.humble'),
  '2017-07-22',
  '2017-08-02'
);

INSERT INTO ISSUE_TRACKER.ISSUE (title, description, status, reporter, assignee, created, completed)
VALUES (
  'Issue number four',
  'This is issue number four',
  'done',
  (select id from ISSUE_TRACKER.USER where USER.username = 'h.humble'),
  (select id from ISSUE_TRACKER.USER where USER.username = 'j.jones'),
  '2017-08-02',
  '2017-08-02'
);

INSERT INTO ISSUE_TRACKER.ISSUE (title, description, status, reporter, assignee, created)
VALUES (
  'Issue number five',
  'This is issue number five',
  'in_progress',
  (select id from ISSUE_TRACKER.USER where USER.username = 'j.jones'),
  (select id from ISSUE_TRACKER.USER where USER.username = 'j.jones'),
  '2017-08-02'
);


